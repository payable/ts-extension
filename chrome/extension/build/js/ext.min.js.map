{"version":3,"file":"ext.min.js","sources":["background/record.js","background/clickHandler.js","background/msgRouter.js","background/listenButton.js","BackgroundMain.js"],"names":["define","RecordMaker","prototype","make","details","dateFormatted","date","month","day","endTime","startTime","hours","mins","textArr","queue","id","subject","Date","getMonth","getDate","getFullYear","getHours","getMinutes","setHours","setMinutes","unshift","join","console","log","this","copy","text","copyDiv","document","createElement","contentEditable","body","appendChild","innerHTML","unselectable","focus","execCommand","removeChild","record","onItemClick","info","tab","chrome","tabs","sendMessage","onGetDetails","bind","contextMenus","create","title","contexts","onclick","MessageRouter","runtime","onMessage","addListener","messageListener","add","a","b","map","request","sender","sendResponse","action","err","warn","callback","msgRouter","require"],"mappings":"AAAA,AAAAA,OAAA,uBAAA,WACA,QAAAC,MAoDA,MAjDAA,GAAAC,UAAAC,KAAA,SAAAC,GACA,GAAAC,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACAC,GAAAT,EAAAU,MAAAV,EAAAW,GAAAX,EAAAY,QAEAH,GAAA,GAAA,MAAAA,EAAA,GACAA,EAAA,GAAA,IAAAA,EAAA,GAAA,IACAP,EAAA,GAAAW,MACAV,EAAAD,EAAAY,WAAA,EACAV,EAAAF,EAAAa,UACAZ,EAAA,GAAAA,EAAA,IAAAA,EAAAA,EACAC,EAAA,GAAAA,EAAA,IAAAA,EAAAA,EACAH,EAAAC,EAAAc,cAAA,IAAAb,EAAA,IAAAC,EAEAG,EAAAL,EAAAe,WACAT,EAAAN,EAAAgB,aACAX,EAAA,GAAAA,EAAA,IAAAA,EAAAA,EACAC,EAAA,GAAAA,EAAA,IAAAA,EAAAA,EACAH,EAAAE,EAAA,IAAAC,EAEAN,EAAAiB,SAAA,IACAjB,EAAAkB,WAAA,GACAb,EAAAL,EAAAe,WACAT,EAAAN,EAAAgB,aACAX,EAAA,GAAAA,EAAA,IAAAA,EAAAA,EACAC,EAAA,GAAAA,EAAA,IAAAA,EAAAA,EACAF,EAAAC,EAAA,IAAAC,EAEAC,EAAAY,QAAAhB,GACAI,EAAAY,QAAAf,GACAG,EAAAY,QAAApB,GAEAQ,EAAAA,EAAAa,KAAA,KAEAC,QAAAC,IAAAf,GACAgB,KAAAC,KAAAjB,IAGAZ,EAAAC,UAAA4B,KAAA,SAAAC,GACA,GAAAC,GAAAC,SAAAC,cAAA,MACAF,GAAAG,iBAAA,EACAF,SAAAG,KAAAC,YAAAL,GACAA,EAAAM,UAAAP,EACAC,EAAAO,aAAA,MACAP,EAAAQ,QACAP,SAAAQ,YAAA,aACAR,SAAAQ,YAAA,QAAA,EAAA,MACAR,SAAAG,KAAAM,YAAAV,IAGA,GAAA/B,KCnDAD,OAAA,2BAAA,qBAAA,SAAA2C,GASA,QAAAC,GAAAC,EAAAC,GACAC,OAAAC,KAAAC,YAAAH,EAAA/B,IAAAgB,KAAA,gBAAAmB,EAAAC,KAAAtB,KAAAgB,IAGA,QAAAK,GAAAL,EAAAzC,GACAA,EAAAA,MACAuC,EAAAxC,KAAAC,GAdA2C,OAAAK,aAAAC,QAEAC,MAAA,yBACAC,UAAA,OAAA,aACAC,QAAAZ,MCLA5C,OAAA,0BACA,WACA,QAAAyD,KACAV,OAAAW,QAAAC,UAAAC,YAAA/B,KAAAgC,gBAAAV,KAAAtB,OAEAA,KAAAiC,IAAA,SAAAC,EAAAC,GACAnC,KAAAkC,GAAAC,GAoCA,MAhCAP,GAAAvD,UAAA+D,OAUAR,EAAAvD,UAAA2D,gBAAA,SAAAK,EAAAC,EAAAC,GACA,IACA,GAAAC,GAAAH,EAAAG,MACAxC,MAAAoC,IAAAI,IAAA,kBAAAxC,MAAAoC,IAAAI,IACAxC,KAAAoC,IAAAI,GAAAH,EAAAC,EAAAC,GAEA,MAAAE,GACA3C,QAAA4C,KAAA,uEAWAd,EAAAvD,UAAA0D,YAAA,SAAAS,EAAAG,GACA3C,KAAAoC,IAAAI,GAAAG,GAGA,GAAAf,KC1CAzD,OAAA,2BACA,oBACA,wBACA,SAAA2C,EAAA8B,GACAA,EAAAb,YAAA,gBAAAjB,EAAAxC,KAAAgD,KAAAR,MCFA+B,SACA,0BACA,2BACA,cAGA1E,OAAA,iBAAA;AJTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA,ADuDA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA,ADiDA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA,ADUA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["define('background/record',[], function(){\n    function RecordMaker(){\n    }\n\n    RecordMaker.prototype.make = function(details){\n        var dateFormatted, date, month, day, endTime, startTime, hours, mins;\n        var textArr = [details.queue, details.id, details.subject];\n\n        textArr[1] = 'RT:' + textArr[1];\n        textArr[2] = '\"' + textArr[2] + '\"';\n        date = new Date();\n        month = date.getMonth() + 1;\n        day = date.getDate();\n        month = month < 10 ? '0' + month : month;\n        day = day < 10 ? '0' + day : day;\n        dateFormatted = date.getFullYear() + '-' + month + '-' + day;\n\n        hours = date.getHours();\n        mins = date.getMinutes();\n        hours = hours < 10 ? '0' + hours : hours;\n        mins = mins < 10 ? '0' + mins : mins;\n        endTime = hours + ':' + mins;\n\n        date.setHours(10);\n        date.setMinutes(0);\n        hours = date.getHours();\n        mins = date.getMinutes();\n        hours = hours < 10 ? '0' + hours : hours;\n        mins = mins < 10 ? '0' + mins : mins;\n        startTime = hours + ':' + mins;\n\n        textArr.unshift(endTime);\n        textArr.unshift(startTime);\n        textArr.unshift(dateFormatted);\n\n        textArr = textArr.join(',');\n\n        console.log(textArr);\n        this.copy(textArr);\n    };\n\n    RecordMaker.prototype.copy = function(text){\n        var copyDiv = document.createElement('div');\n        copyDiv.contentEditable = true;\n        document.body.appendChild(copyDiv);\n        copyDiv.innerHTML = text;\n        copyDiv.unselectable = \"off\";\n        copyDiv.focus();\n        document.execCommand('SelectAll');\n        document.execCommand(\"Copy\", false, null);\n        document.body.removeChild(copyDiv);\n    };\n\n    return new RecordMaker();\n});\n","/* global chrome */\n\ndefine('background/clickHandler',['background/record'], function (record) {\n    chrome.contextMenus.create(\n        {\n            title: 'Form TS rec and ctrl+C',\n            contexts: [\"page\", \"selection\"],\n            onclick: onItemClick\n        }\n    );\n\n    function onItemClick(info, tab) {\n        chrome.tabs.sendMessage(tab.id, {text: \"tsGetDetails\"}, onGetDetails.bind(this, info));\n    }\n\n    function onGetDetails(info, details) {\n        details = details || {};\n        record.make(details);\n    }\n});\n","/* global chrome */\n\ndefine('background/msgRouter',[\n], function(){\n    function MessageRouter(){\n        chrome.runtime.onMessage.addListener(this.messageListener.bind(this));\n\n        this.add = function(a,b){\n            this[a] = b;\n        };\n    }\n    // one action - one callback\n    MessageRouter.prototype.map = {};\n\n    /**\n     * Function, which handles messages\n     * @param {Object} request POJO with required 'action' property\n     * @param {String} request.action\n     * @param {Object} sender Chrome tab\n     * @param {Function} sendResponse Call special function, which is waiting for an answer\n     * @returns {undefined}\n     */\n    MessageRouter.prototype.messageListener = function (request, sender, sendResponse) {\n        try{\n            var action = request.action;\n            if ( this.map[action] && typeof this.map[action] === 'function' ){\n                this.map[action](request, sender, sendResponse); // provide already bound functions if needed\n            }\n        }catch(err){\n            console.warn('Message processing has failed. Let the developer know about that.')\n        }\n    };\n    \n    /**\n     * Add one association \"action->handler\", which is checked with every\n     * message came\n     * @param {String} action\n     * @param {Function} callback\n     * @returns {undefined}\n     */\n    MessageRouter.prototype.addListener = function (action, callback) {\n        this.map[action] = callback; // one action - one callback\n    };\n\n    return new MessageRouter();\n\n});\n\n\n","/* global chrome */\n\ndefine('background/listenButton',[\n    'background/record',\n    'background/msgRouter'\n], function(record, msgRouter){\n    msgRouter.addListener('ticketDetails', record.make.bind(record));\n});\n\n\n","/**\n * This is the main JS file for background script, it is a subject to grunt's build routine.\n */\n\nrequire([\n    'background/clickHandler',\n    'background/listenButton'\n], function(){\n});\n\ndefine(\"BackgroundMain\", function(){});\n\n"]}